<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MBTI äººæ ¼æ¸¬é©— - éå¹´ç‰ˆ</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&display=swap" rel="stylesheet">
    <!-- Remix Icon -->
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['"Noto Sans TC"', 'sans-serif'],
                    },
                    colors: {
                        cny: {
                            red: '#e63946',
                            darkred: '#9a031e',
                            gold: '#f5cb5c',
                            darkgold: '#b58900',
                            bg: '#fdfbf7'
                        }
                    },
                    boxShadow: {
                        'glass': '0 8px 32px 0 rgba(230, 57, 70, 0.15)',
                        'card': '0 20px 40px -10px rgba(0,0,0,0.1)',
                    }
                }
            }
        }
    </script>

    <!-- App Logic -->
    <script>
        function mbtiApp() {
            return {
                screen: 'start', // start, quiz, result
                currentIndex: 0,
                answers: [], // ç´€éŒ„é¸æ“‡ A(å·¦) æˆ– B(å³)
                resultType: 'INTJ', // é è¨­çµæœ
                
                // æ»‘å‹•ç‰©ç†ç‹€æ…‹
                isDragging: false,
                hasDragged: false, // åˆ¤æ–·æ˜¯å¦ç‚ºæ»‘å‹•ï¼Œä»¥å€åˆ†ç´”é»æ“Š
                startX: 0,
                startY: 0,
                dragX: 0,
                dragY: 0,
                isAnimatingOut: false, // åˆ¤æ–·æ˜¯å¦æ­£åœ¨é£›å‡º
                leaveX: 0,
                leaveY: 0,

                questions: [
                    // æŒ‰ç…§éå¹´æ™‚é–“è»¸æ’åˆ— (éå¹´å‰æº–å‚™ -> é™¤å¤•å¤œ -> ç´…åŒ… -> èµ°æ˜¥æ‹œè¨ª -> å‡æœŸçµæŸ)
                    { q: 'éå¹´å‰è¦æº–å‚™é€çµ¦è¦ªæœ‹å¥½å‹çš„ä¼´æ‰‹ç¦®ï¼Œä½ æœƒ...', a: 'ææ—©å¹¾å€‹ç¦®æ‹œå°±åˆ—å¥½æ¸…å–®ã€æ¯”åƒ¹ä¸¦é è³¼å®Œç•¢', b: 'æ‹–åˆ°æœ€å¾Œå¹¾å¤©ï¼Œé€›è¡—çœ‹åˆ°ä»€éº¼ä¸éŒ¯å°±ç›´æ¥è²·', dim: 'JP' },
                    { q: 'æº–å‚™éå¹´è¦è²·æ˜¥è¯æˆ–å®¶è£¡è£é£¾æ™‚ï¼Œä½ æœƒ...', a: 'æŒ‘é¸å‚³çµ±å¯«è‘—ã€Œæ‹›è²¡é€²å¯¶ã€ã€ã€Œæ˜¥ã€çš„å¯¦ç”¨åŸºæœ¬æ¬¾', b: 'å°‹æ‰¾æœ‰è¨­è¨ˆæ„Ÿã€å¸¶æœ‰ç‰¹æ®Šå¯“æ„æˆ–å‰µæ„çš„æ–‡å‰µæ˜¥è¯', dim: 'SN' },
                    { q: 'é™¤å¤•å›åˆ°è€å®¶ï¼Œä¸€æ¨é–‹é–€çœ‹åˆ°æ»¿å±‹å­è¦ªæˆšï¼Œä½ æœƒ...', a: 'é–‹å¿ƒå¤§è²æ‰“æ‹›å‘¼ï¼Œé¦¬ä¸Šèå…¥å¤§å®¶èŠèµ·ä¾†', b: 'å¾®ç¬‘é»é ­è‡´æ„ï¼Œç„¶å¾Œé»˜é»˜æ‰¾å€‹å®‰éœçš„è§’è½åä¸‹', dim: 'EI' },
                    { q: 'å¹«å¿™æº–å‚™å¹´å¤œé£¯æ™‚ï¼Œçªç„¶ç™¼ç¾å°‘è²·äº†ä¸€æ¨£é‡è¦é£Ÿæï¼Œä½ æœƒ...', a: 'è¿…é€Ÿæ€è€ƒæ›¿ä»£æ–¹æ¡ˆï¼Œæˆ–é¦¬ä¸Šè¨ˆç®—å»å“ªé–“è¶…å¸‚è²·æœ€å¿«', b: 'æ“”å¿ƒè² è²¬è²·èœçš„äººè‡ªè²¬ï¼Œå…ˆå®‰æ…°å°æ–¹èªªã€Œæ²’é—œä¿‚å•¦ã€', dim: 'TF' },
                    { q: 'çœ‹è‘—æ»¿æ¡Œè±ç››çš„å¹´èœï¼Œä½ è…¦æµ·è£¡é¦–å…ˆæµ®ç¾çš„æ˜¯...', a: 'èœè‰²çœŸè±å¯Œï¼Œé‚£é“ä½›è·³ç‰†å¥½é¦™ï¼Œçƒé­šå­çƒ¤å¾—å‰›å‰›å¥½', b: 'é€™é “é£¯ä»£è¡¨è‘—ä¸€å®¶åœ˜åœ“çš„æ„ç¾©ï¼Œå……æ»¿å›æ†¶èˆ‡æº«é¦¨æ„Ÿ', dim: 'SN' },
                    
                    { q: 'åƒå¹´å¤œé£¯æ™‚ï¼Œé•·è¼©å€‘åœ¨ç†±çƒˆè¨è«–å®¶æ—å¾€äº‹ï¼Œä½ é€šå¸¸...', a: 'ç©æ¥µæ’è©±ï¼Œé †ä¾¿åˆ†äº«è‡ªå·±æœ€è¿‘é‡åˆ°çš„è¶£äº‹', b: 'é‚Šåƒé‚Šè½ï¼Œå¶çˆ¾é»é ­é™„å’Œå¹¾å¥ï¼Œä¸å¸¸ä¸»å‹•ç™¼è¨€', dim: 'EI' },
                    { q: 'åƒå®Œå¹´å¤œé£¯ï¼Œè¡¨å“¥æè­°å¤§å®¶ä¾†æ‰“éº»å°‡æˆ–ç©æ’²å…‹ç‰Œï¼Œä½ æœƒ...', a: 'é¦¬ä¸Šæ¹Šéå»å–Šã€ŒåŠ æˆ‘ä¸€å€‹ï¼ã€ï¼Œäº«å—ç†±é¬§çš„æ°£æ°›', b: 'èªªè‡ªå·±ä¸å¤ªæœƒæ‰“æˆ–æœ‰é»ç´¯ï¼Œå¯§é¡˜åœ¨æ—é‚Šæ»‘æ‰‹æ©Ÿä¼‘æ¯', dim: 'EI' },
                    { q: 'é£¯å¾Œé•·è¼©åœ¨å®¢å»³æŠ±æ€¨æœ€è¿‘èº«é«”è€æ˜¯ç— ç—›ï¼Œä½ æœƒ...', a: 'èªçœŸå»ºè­°ä»–å»å“ªé–“é†«é™¢æª¢æŸ¥ï¼Œæˆ–æ¨è–¦å¥½ç”¨çš„ç— ç—›è²¼å¸ƒ', b: 'èªå¸¶é—œå¿ƒåœ°èªªã€Œè¾›è‹¦äº†ã€ï¼Œå¤šé™ªä»–èŠèŠç”Ÿæ´»ç‘£äº‹', dim: 'TF' },
                    { q: 'é•·è¼©å•èµ·ä½ æ–°çš„ä¸€å¹´æœ‰ä»€éº¼è¨ˆç•«ï¼Œä½ å‚¾å‘å›ç­”...', a: 'å…·é«”å‹™å¯¦çš„ç›®æ¨™ï¼Œä¾‹å¦‚æº–å‚™è€ƒå…¬è·ã€å¤šå­˜é»éŒ¢è²· 0050', b: 'æ¯”è¼ƒå¤§æ–¹å‘çš„é¡˜æ™¯ï¼Œä¾‹å¦‚æ›å€‹è·‘é“è©¦è©¦ã€å°‹æ‰¾ç”Ÿæ´»æ–°é®®æ„Ÿ', dim: 'SN' },
                    { q: 'å¾é•·è¼©æ‰‹ä¸­æ¥éç´…åŒ…æ™‚ï¼Œä½ å¿ƒè£¡æƒ³çš„æ˜¯...', a: 'æä¸€ææ„Ÿè¦ºä»Šå¹´é€™åŒ…æœ‰é»åšï¼Œç›¤ç®—è‘—å¯ä»¥æ‹¿ä¾†è²·ä»€éº¼', b: 'é€™æ˜¯é•·è¼©çš„å¿ƒæ„èˆ‡ç¥ç¦ï¼Œè¦ºå¾—æœ‰å®¶äººé—œå¿ƒçœŸçš„å¾ˆæº«æš–', dim: 'SN' },
                    
                    { q: 'æ‹¿åˆ°ä¸€å †éå¹´ç¦®ç›’è·Ÿä¼´æ‰‹ç¦®ï¼Œä½ æœƒæ€éº¼è™•ç†...', a: 'ç•¶å¤©å°±æ‹†é–‹åˆ†é¡å¥½ï¼Œæ•´é½Šæ”¶é€²å›ºå®šçš„é›¶é£Ÿæ«ƒå­è£¡', b: 'å…ˆå…¨éƒ¨å †åœ¨å®¢å»³è§’è½ï¼Œç­‰ä¹‹å¾Œæœ‰ç©ºæˆ–æƒ³åƒæ™‚å†æ…¢æ…¢å¼„', dim: 'JP' },
                    { q: 'éå¹´æœŸé–“è¦ªæˆšå®¶çš„å°å­©ç‚ºäº†æ¶é›»è¦–æˆ–ç©å…·åµèµ·ä¾†äº†ï¼Œä½ æœƒ...', a: 'äº†è§£äº‹æƒ…ç¶“éï¼Œå®¢è§€æŒ‡å‡ºèª°å°èª°éŒ¯ä¸¦è·Ÿä»–å€‘è¬›é“ç†', b: 'å…ˆå®‰æ’«å…©é‚Šçš„æƒ…ç·’ï¼Œæ‹¿é›¶é£Ÿè½‰ç§»ä»–å€‘çš„æ³¨æ„åŠ›è®“å¤§å®¶å’Œå¥½', dim: 'TF' },
                    { q: 'é‡åˆ°æ„›æ¯”è¼ƒçš„è¦ªæˆšå°ä½ çš„è–ªæ°´æˆ–æ„Ÿæƒ…ç‹€æ³ç˜‹ç‹‚æ‹·å•ï¼Œä½ çš„åæ‡‰æ˜¯...', a: 'è¦ºå¾—é€™åªæ˜¯è³‡è¨Šäº¤æ›ï¼Œé¢ç„¡è¡¨æƒ…åœ°çµ¦å‡ºç°¡çŸ­çš„å®˜æ–¹æ¨™æº–ç­”æ¡ˆ', b: 'è¦ºå¾—å€‹äººéš±ç§è¢«ä¾µçŠ¯ï¼Œå¿ƒè£¡æœ‰é»å—å‚·æˆ–ä¸èˆ’æœä½†åŠªåŠ›ä¿æŒå¾®ç¬‘', dim: 'TF' },
                    { q: 'åˆä¸€å»å¤§å»Ÿæ‹œæ‹œæˆ–é€›è€è¡—ï¼Œäººæ½®éå¸¸æ“æ“ ï¼Œä½ çš„æ„Ÿè¦ºæ˜¯...', a: 'éå¹´å°±æ˜¯è¦é€™æ¨£äººæ“ äººæ‰æœ‰æ°£æ°›ï¼Œè¦ºå¾—å¾ˆç†±é¬§å¥½ç©', b: 'è¦ºå¾—äººå¤ªå¤šç©ºæ°£å¾ˆæ‚¶ã€å¥½ç…©èºï¼Œåªæƒ³è¶•å¿«æ‹œå®Œå›å®¶', dim: 'EI' },
                    { q: 'å…¨å®¶è¦æ±ºå®šå¤§å¹´åˆä¸‰è¦å»å“ªè£¡èµ°æ˜¥ï¼Œä½ çš„æ±ºç­–æ–¹å¼æ˜¯...', a: 'ç†æ€§åˆ†æå„æ™¯é»çš„è»Šç¨‹ã€å¡è»Šæ©Ÿç‡å’ŒèŠ±è²»ä¾†æ±ºå®š', b: 'å„ªå…ˆè€ƒæ…®å¤§å®¶çš„å–œå¥½ï¼Œé¸ä¸€å€‹èƒ½è®“å¤šæ•¸äººéƒ½é–‹å¿ƒçš„åœ°æ–¹', dim: 'TF' },
                    
                    { q: 'å°æ–¼éå¹´æœŸé–“å‡ºé–€æ‹œè¨ªè¦ªæˆšçš„è¡Œç¨‹ï¼Œä½ çš„ç¿’æ…£æ˜¯...', a: 'äº‹å…ˆæ’å¥½ç²¾ç¢ºçš„æ™‚é–“è¡¨ï¼šå¹¾é»å‡ºç™¼ã€åˆ°å“ªå®¶ã€å¾…å¤šä¹…', b: 'éš¨æ€§ç™¼æ®ï¼šçœ‹ç•¶å¤©å¤§å®¶èµ·åºŠçš„æ™‚é–“å’Œå¿ƒæƒ…æ±ºå®šå»å“ª', dim: 'JP' },
                    { q: 'åŸæœ¬èªªå¥½è¦å»æ‹œè¨ªçš„è¦ªæˆšè‡¨æ™‚ä¸åœ¨å®¶ï¼Œä½ æœƒ...', a: 'è¦ºå¾—åŸæœ¬çš„è¨ˆç•«è¢«æ‰“äº‚ï¼Œå¿ƒè£¡æœ‰é»ç„¦æ…®æˆ–ä¸é©æ‡‰', b: 'è¦ºå¾—æ²’å·®ï¼Œå‰›å¥½ç©ºå‡ºæ™‚é–“å¯ä»¥å»åˆ¥çš„åœ°æ–¹æ™ƒæ™ƒåƒæ±è¥¿', dim: 'JP' },
                    { q: 'çœ‹åˆ°é›»è¦–ä¸Šåœ¨æ’­æ˜å¹´çš„ç”Ÿè‚–é‹å‹¢æˆ–æµå¹´é¢¨æ°´ï¼Œä½ æœƒ...', a: 'è½è½å°±å¥½ï¼Œé‚„æ˜¯è¦ºå¾—è…³è¸å¯¦åœ°é è‡ªå·±çš„åŠªåŠ›æ¯”è¼ƒå¯¦åœ¨', b: 'è¦ºå¾—æ»¿æœ‰è¶£çš„ï¼Œæœƒä¸è‡ªè¦ºè¯æƒ³åˆ°è‡ªå·±æ˜å¹´å¯èƒ½ç™¼ç”Ÿçš„å„ç¨®äº‹', dim: 'SN' },
                    { q: 'é€£çºŒå¹¾å¤©èµ°æ˜¥æ‹œå¹´çµæŸå¾Œï¼Œä½ çš„ç‹€æ…‹æ˜¯...', a: 'æ„çŒ¶æœªç›¡ï¼Œè¦ºå¾—å……æ»¿æ­¡æ¨‚èƒ½é‡ï¼Œé‚„æƒ³å†ç´„æœ‹å‹å‡ºå»', b: 'ç¤¾äº¤é›»é‡å¾¹åº•è€—ç›¡ï¼Œåªæƒ³æŠŠè‡ªå·±é—œåœ¨æˆ¿é–“å®‰éœè€å»¢', dim: 'EI' },
                    { q: 'æ•´é«”ä¾†èªªï¼Œéå¹´é€™æ®µé•·å‡ï¼Œä½ æ¯”è¼ƒåå¥½å“ªç¨®åº¦å‡æ¨¡å¼ï¼Ÿ', a: 'æ¯å¤©éƒ½æœ‰å®‰æ’å¥½çš„è¡Œç¨‹æˆ–ä»£è¾¦äº‹é …ï¼Œéå¾—å¾ˆå……å¯¦', b: 'å®Œå…¨æ²’æœ‰ä»»ä½•å›ºå®šè¡Œç¨‹ï¼Œæ¯å¤©ç¡åˆ°è‡ªç„¶é†’å†èªª', dim: 'JP' }
                ],

                mbtiData: {
                    'INTJ': { title: 'ç­–ç•¥è¦åŠƒè€…', en: 'Strategic Planner', desc: 'ä½ æ˜¯éå¹´èšæœƒçš„å¹•å¾Œè»å¸«ã€‚ä¸æ„›å–§é¬§ï¼Œä½†èƒ½ç†æ€§åˆ†æè¦ªæˆšé—œä¿‚ï¼Œè¦åŠƒæœ€æœ‰æ•ˆç‡çš„æ‹œè¨ªè·¯ç·šã€‚å°å‚³çµ±ç¦®ä¿—æœ‰ç¨åˆ°è¦‹è§£ã€‚' },
                    'INTP': { title: 'å¥½å¥‡è§€å¯Ÿè€…', en: 'Curious Observer', desc: 'èšæœƒä¸­çš„å®‰éœè§€å¯Ÿå®¶ã€‚å°é•·è¼©æ•…äº‹å……æ»¿å¥½å¥‡ï¼Œå–œæ­¡åˆ†æå®¶æ—è¶£äº‹èƒŒå¾Œçš„é‚è¼¯ã€‚é‡åˆ°æ„Ÿèˆˆè¶£çš„è©±é¡Œå°±èƒ½æ»”æ»”ä¸çµ•ã€‚' },
                    'ENTJ': { title: 'å®¶æ—ç¸½æŒ‡æ®', en: 'Family Organizer', desc: 'å¤©ç”Ÿçš„èšæœƒé ˜å°è€…ã€‚æ“…é•·å”èª¿æ™‚é–“ã€å®‰æ’æµç¨‹ï¼Œç¢ºä¿æ¯å€‹ç’°ç¯€é †åˆ©ã€‚ä½ çš„æœæ–·å’Œæ•ˆç‡è®“é•·è¼©å€‘éƒ½å¾ˆæ”¾å¿ƒã€‚' },
                    'ENTP': { title: 'è©±é¡Œè£½é€ æ©Ÿ', en: 'Debate Starter', desc: 'å–œæ­¡æ‹‹å‡ºæ–°è§€é»æŒ‘æˆ°å‚³çµ±ï¼ŒæŠŠé£¯æ¡Œè®Šè¾¯è«–å ´ã€‚é›–ç„¶æœ‰æ™‚è®“é•·è¼©å‚»çœ¼ï¼Œä½†ç¸½èƒ½ç‚ºæ–°å¹´å¸¶ä¾†æ–°é®®çš„æ€è€ƒè§’åº¦ã€‚' },
                    'INFJ': { title: 'å®‰éœè«®è©¢å¸«', en: 'Quiet Counselor', desc: 'å®¶æ—çš„å¿ƒéˆå°å¸«ã€‚å–„æ–¼å‚¾è½å¿ƒäº‹ï¼Œçµ¦äºˆæº«æš–å»ºè­°ã€‚é›–ç„¶ä¸æ„›å–§é¬§ï¼Œä½†æ·±åˆ»ç†è§£æ¯å€‹äººçš„æ„Ÿå—ï¼Œæ˜¯æƒ…ç·’é¿é¢¨æ¸¯ã€‚' },
                    'INFP': { title: 'å¤¢å¹»æ•…äº‹å®¶', en: 'Dreamy Storyteller', desc: 'èšæœƒçš„æµªæ¼«éˆé­‚ã€‚å°å®¶æ—æ•…äº‹å……æ»¿æƒ³åƒï¼Œå–œæ­¡å¾å¹³å‡¡äº’å‹•çœ‹è¦‹æ·±å±¤æ„ç¾©ã€‚å¯èƒ½èº²åœ¨è§’è½ç”¨ç¨ç‰¹è¦–è§’è¨˜éŒ„éå¹´å›æ†¶ã€‚' },
                    'ENFJ': { title: 'å’Œè«§æ°£æ°›å¤§å¸«', en: 'Harmonious Host', desc: 'æ°›åœè£½é€ è€…ï¼æ“…é•·ç…§é¡§æ¯å€‹äººçš„æ„Ÿå—ï¼Œè®“æ‰€æœ‰äººéƒ½æ„Ÿåˆ°è¢«é‡è¦–ã€‚ä½ çš„ç†±æƒ…å’ŒåŒç†å¿ƒæ˜¯å®¶æ—å’Œè«§çš„é—œéµã€‚' },
                    'ENFP': { title: 'ç¤¾äº¤èŠ±è´è¶', en: 'Social Butterfly', desc: 'éå¹´çš„å¿«æ¨‚æ³‰æºï¼å……æ»¿æ´»åŠ›èˆ‡å‰µæ„ï¼Œç¸½èƒ½è®“èšæœƒè®Šæœ‰è¶£ã€‚å¾å°å­©åˆ°é•·è¼©éƒ½å–œæ­¡ä½ ï¼Œå› ç‚ºä½ èƒ½è®“æ¯å€‹äººé–‹å¿ƒã€‚' },
                    'ISTJ': { title: 'å‚³çµ±å®ˆè­·è€…', en: 'Traditional Guardian', desc: 'å®¶æ—å‚³çµ±çš„å®ˆè­·è€…ã€‚é‡è¦–ç¦®ç¯€ã€æº–æ™‚ã€è¦çŸ©ï¼Œç¢ºä¿éå¹´ç¿’ä¿—ä¸€å€‹ä¸æ¼ã€‚ä½ çš„å¯é å’ŒèªçœŸè®“é•·è¼©å€‘éƒ½å¾ˆå®‰å¿ƒã€‚' },
                    'ISFJ': { title: 'è²¼å¿ƒç…§é¡§è€…', en: 'Caring Host', desc: 'æœ€è²¼å¿ƒçš„å®¶æ—æˆå“¡ã€‚é»˜é»˜è¨˜å¾—æ¯å€‹äººçš„å–œå¥½ï¼Œæº–å‚™è²¼å¿ƒç¦®ç‰©ã€‚é›–ç„¶ä½èª¿ï¼Œä½†ä½ çš„ç´°å¿ƒè®“æ¯å€‹äººéƒ½æ„Ÿåˆ°æº«æš–ã€‚' },
                    'ESTJ': { title: 'é«˜æ•ˆå”èª¿è€…', en: 'Efficient Coordinator', desc: 'èšæœƒçš„å¯¦å‹™åŸ·è¡Œè€…ã€‚æ“…é•·åˆ†é…å·¥ä½œã€æŒæ§æ™‚é–“ï¼Œç¢ºä¿ä¸€åˆ‡æŒ‰è¨ˆç•«é€²è¡Œã€‚æ•ˆç‡å’Œè²¬ä»»æ„Ÿæ˜¯å®¶æ—æ´»å‹•çš„æ”¯æŸ±ã€‚' },
                    'ESFJ': { title: 'è¦ªæƒ…é€£çµè€…', en: 'Caring Connector', desc: 'å®¶æ—çš„æƒ…æ„Ÿä¸­å¿ƒã€‚ç†±å¿ƒç…§é¡§æ¯å€‹äººï¼Œç©æ¥µç¶­ç¹«è¦ªæˆšé–“çš„é—œä¿‚ã€‚ä½ çš„ç†±æƒ…å’Œé—œæ‡·è®“æ¯å€‹äººéƒ½æ„Ÿåˆ°è¢«æ„›ã€‚' },
                    'ISTP': { title: 'å¯¦ç”¨è§£æ±ºè€…', en: 'Problem Solver', desc: 'èšæœƒçš„å¯¦ç”¨å¹«æ‰‹ã€‚ç•¶é›»å™¨å£äº†ã€æ±è¥¿çµ„è£ä¸èµ·ä¾†ï¼Œä½ ç¸½èƒ½å†·éœæå®šã€‚é›–ç„¶è©±ä¸å¤šï¼Œä½†é—œéµæ™‚åˆ»æœ€å¯é ã€‚' },
                    'ISFP': { title: 'ç¾æ„Ÿå‰µé€ è€…', en: 'Artistic Decorator', desc: 'èšæœƒçš„ç¾æ„Ÿæ“”ç•¶ã€‚å–œæ­¡ç”¨é®®èŠ±ã€æ“ºé£¾è®“ç’°å¢ƒæ›´ç¾ï¼Œæˆ–ç”¨ç¾é£ŸéŸ³æ¨‚ç‡Ÿé€ æ°›åœã€‚ä½ çš„è—è¡“å¤©ä»½è®“éå¹´æ›´æœ‰è³ªæ„Ÿã€‚' },
                    'ESTP': { title: 'æ´»åŠ›éŠæˆ²ç‹', en: 'Game Master', desc: 'èšæœƒçš„æ´»åŠ›å¼•æ“ï¼æ“…é•·å¸¶å‹•æ°£æ°›ï¼Œæè­°å„ç¨®å¥½ç©çš„æ´»å‹•ã€‚ä½ çš„è¡Œå‹•åŠ›å’Œå¹½é»˜æ„Ÿè®“éå¹´æ°¸é ä¸ç„¡èŠã€‚' },
                    'ESFP': { title: 'å…¨å ´ç„¦é»æ˜æ˜Ÿ', en: 'Entertainer', desc: 'èšæœƒçš„ç„¦é»æ˜æ˜Ÿï¼æ„›è¡¨æ¼”ã€æ„›æç¬‘ï¼Œç¸½èƒ½é€—å¤§å®¶é–‹å¿ƒã€‚ä½ çš„ç†±æƒ…å’Œè¡¨ç¾åŠ›è®“éå¹´å……æ»¿æ­¡ç¬‘å’Œé›£å¿˜å›æ†¶ã€‚' }
                },

                initApp() {
                    // å…¨å±€æ»‘å‹•äº‹ä»¶ç›£è½
                    document.addEventListener('mousemove', (e) => this.onDrag(e));
                    document.addEventListener('mouseup', () => this.endDrag());
                    document.addEventListener('touchmove', (e) => this.onDrag(e), { passive: false });
                    document.addEventListener('touchend', () => this.endDrag());
                },

                startQuiz() {
                    this.screen = 'quiz';
                    window.scrollTo(0,0);
                },

                // è™•ç†å¡ç‰‡æ¨£å¼å‹•æ…‹è¨ˆç®— (å †ç–Šã€æ—‹è½‰ã€ä½ç§»)
                getCardStyle(index) {
                    if (index === this.currentIndex) {
                        // ç•¶å‰å¡ç‰‡
                        if (this.isAnimatingOut) {
                            return `transform: translate(${this.leaveX}px, ${this.leaveY}px) rotate(${this.leaveX / 15}deg); opacity: 0; transition: all 0.4s ease-out;`;
                        }
                        if (this.isDragging) {
                            return `transform: translate(${this.dragX}px, ${this.dragY}px) rotate(${this.dragX / 20}deg); transition: none;`;
                        }
                        return `transform: translate(0px, 0px) rotate(0deg); transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);`;
                    } else if (index === this.currentIndex + 1) {
                        // ä¸‹ä¸€å¼µå¡ç‰‡ (ç¸®å°ä¸¦åœ¨å¾Œæ–¹)
                        const scale = this.isDragging ? 0.95 + (Math.abs(this.dragX) / 1000) : 0.95;
                        const finalScale = Math.min(scale, 1);
                        return `transform: scale(${finalScale}) translateY(15px); opacity: 1; transition: transform 0.3s ease-out;`;
                    }
                    return 'display: none;';
                },

                // é»æ“Šå·¦å³å…©å´é¸é¡Œ
                handleClick(e) {
                    // å¦‚æœæ­£åœ¨å‹•ç•«ä¸­ï¼Œæˆ–è€…å‰›å‰›è§¸ç™¼çš„æ˜¯æ»‘å‹•è€Œéé»æ“Šï¼Œå‰‡å¿½ç•¥æ­¤äº‹ä»¶
                    if (this.isAnimatingOut || this.hasDragged) return;
                    
                    const rect = e.currentTarget.getBoundingClientRect();
                    const clientX = e.clientX; 
                    const clickX = clientX - rect.left;
                    
                    // åˆ¤æ–·é»æ“Šåœ¨å·¦åŠé‚Šæˆ–å³åŠé‚Š
                    if (clickX < rect.width / 2) {
                        this.triggerSwipe('left');
                    } else {
                        this.triggerSwipe('right');
                    }
                },

                // æ‹–æ›³é‚è¼¯
                startDrag(e) {
                    if (this.isAnimatingOut) return;
                    this.isDragging = true;
                    this.hasDragged = false;
                    this.startX = e.type.includes('mouse') ? e.pageX : e.touches[0].pageX;
                    this.startY = e.type.includes('mouse') ? e.pageY : e.touches[0].pageY;
                },

                onDrag(e) {
                    if (!this.isDragging) return;
                    
                    const currentX = e.type.includes('mouse') ? e.pageX : e.touches[0].pageX;
                    const currentY = e.type.includes('mouse') ? e.pageY : e.touches[0].pageY;
                    
                    this.dragX = currentX - this.startX;
                    this.dragY = currentY - this.startY;

                    // å¦‚æœæœ‰ä½ç§»ï¼Œæ¨™è¨˜ç‚ºå·²æ»‘å‹• (é˜²æ­¢èˆ‡ç´”é»æ“Šè¡çª)
                    if (Math.abs(this.dragX) > 5 || Math.abs(this.dragY) > 5) {
                        this.hasDragged = true;
                    }

                    // é˜²æ­¢æ‰‹æ©Ÿç«¯æ‹–æ›³å¡ç‰‡æ™‚é é¢æ»¾å‹•
                    if (e.type.includes('touch') && Math.abs(this.dragX) > Math.abs(this.dragY)) {
                        e.preventDefault();
                    }
                },

                endDrag() {
                    if (!this.isDragging) return;
                    this.isDragging = false;
                    
                    const threshold = window.innerWidth * 0.25; // è¢å¹•å¯¬åº¦ 25% ç‚ºé–¾å€¼
                    
                    if (this.dragX > threshold) {
                        this.triggerSwipe('right');
                    } else if (this.dragX < -threshold) {
                        this.triggerSwipe('left');
                    } else {
                        // æœªé”é–¾å€¼ï¼Œå½ˆå›åŸä½
                        this.dragX = 0;
                        this.dragY = 0;
                    }
                },

                triggerSwipe(direction) {
                    this.isAnimatingOut = true;
                    this.leaveX = direction === 'left' ? -window.innerWidth : window.innerWidth;
                    this.leaveY = this.dragY + (Math.random() * 100 - 50); // åŠ ä¸Šä¸€é»éš¨æ©Ÿï¼¹è»¸å¢åŠ è‡ªç„¶æ„Ÿ
                    
                    // è¨˜éŒ„ç­”æ¡ˆ (Left = A, Right = B)
                    this.answers[this.currentIndex] = direction === 'left' ? 'A' : 'B';

                    setTimeout(() => {
                        this.nextQuestion();
                    }, 300); // ç­‰å¾…é£›å‡ºå‹•ç•«å®Œæˆ
                },

                nextQuestion() {
                    this.isAnimatingOut = false;
                    this.dragX = 0;
                    this.dragY = 0;
                    this.leaveX = 0;
                    this.leaveY = 0;
                    
                    if (this.currentIndex < 19) {
                        this.currentIndex++;
                    } else {
                        this.calculateResult();
                    }
                },

                prevQuestion() {
                    if (this.currentIndex > 0) {
                        this.currentIndex--;
                        this.dragX = 0;
                        this.dragY = 0;
                    }
                },

                calculateResult() {
                    let scores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
                    
                    this.answers.forEach((ans, idx) => {
                        const dim = this.questions[idx].dim;
                        if (ans === 'A') scores[dim[0]]++;
                        else if (ans === 'B') scores[dim[1]]++;
                    });

                    const type = 
                        (scores.E >= scores.I ? 'E' : 'I') +
                        (scores.S >= scores.N ? 'S' : 'N') +
                        (scores.T >= scores.F ? 'T' : 'F') +
                        (scores.J >= scores.P ? 'J' : 'P');

                    this.resultType = type;
                    this.screen = 'result';
                    
                    // è§¸ç™¼æ…¶ç¥ç´™å±‘å‹•ç•«
                    this.$nextTick(() => {
                        this.fireConfetti();
                    });
                },

                fireConfetti() {
                    var duration = 3000;
                    var end = Date.now() + duration;

                    (function frame() {
                        confetti({
                            particleCount: 5,
                            angle: 60,
                            spread: 55,
                            origin: { x: 0 },
                            colors: ['#e63946', '#f5cb5c', '#ffffff']
                        });
                        confetti({
                            particleCount: 5,
                            angle: 120,
                            spread: 55,
                            origin: { x: 1 },
                            colors: ['#e63946', '#f5cb5c', '#ffffff']
                        });

                        if (Date.now() < end) {
                            requestAnimationFrame(frame);
                        }
                    }());
                },

                shareResult() {
                    const text = `ğŸ‰ æˆ‘çš„éå¹´ MBTI äººæ ¼æ˜¯ã€${this.resultType} - ${this.mbtiData[this.resultType].title}ã€‘ï¼\nå¿«ä¾†æ¸¬æ¸¬ä½ çš„å°ˆå±¬éå¹´äººæ ¼ ğŸ‘‰`;
                    if (navigator.share) {
                        navigator.share({
                            title: 'MBTI äººæ ¼æ¸¬é©— - éå¹´ç‰ˆ',
                            text: text,
                            url: window.location.href
                        }).catch(console.error);
                    } else {
                        navigator.clipboard.writeText(text + ' ' + window.location.href).then(() => {
                            alert('çµæœå·²è¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼å¯ä»¥å»è²¼çµ¦æœ‹å‹å›‰ï½');
                        });
                    }
                },

                resetQuiz() {
                    this.currentIndex = 0;
                    this.answers = [];
                    this.screen = 'start';
                    window.scrollTo(0,0);
                }
            }
        }
    </script>

    <!-- Alpine.js -->
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <!-- Canvas Confetti -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        body {
            background-color: #fdfbf7;
            background-image: 
                radial-gradient(circle at 15% 50%, rgba(230, 57, 70, 0.05), transparent 25%),
                radial-gradient(circle at 85% 30%, rgba(245, 203, 92, 0.08), transparent 25%);
            overflow-x: hidden;
            touch-action: pan-y; /* å…è¨±å‚ç›´æ»¾å‹•ï¼Œä½†åœ¨å¡ç‰‡ä¸Šç”± JS æ¥ç®¡æ°´å¹³ */
        }

        /* æµ®å‹•èƒŒæ™¯è£é£¾ */
        .bg-ornament {
            position: fixed;
            z-index: -1;
            opacity: 0.15;
            user-select: none;
            animation: float 6s ease-in-out infinite;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }

        /* ç»ç’ƒæ“¬ç‰©åŒ–å¡ç‰‡ */
        .glass-panel {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.5);
            box-shadow: var(--tw-shadow-glass);
        }

        /* æ¸¬é©—å¡ç‰‡å †ç–Š */
        .card-stack {
            position: relative;
            width: 100%;
            max-width: 380px;
            height: 480px;
            margin: 0 auto;
            perspective: 1000px;
        }

        .swipe-card {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: white;
            border-radius: 1.5rem;
            box-shadow: var(--tw-shadow-card);
            border: 2px solid #fff;
            display: flex;
            flex-direction: column;
            transform-origin: 50% 100%;
            will-change: transform, opacity;
            touch-action: none; 
            user-select: none;
        }

        /* çµæœé å‹•æ…‹æ¼¸å±¤å­— */
        .text-gradient-gold {
            background: linear-gradient(135deg, #b58900 0%, #f5cb5c 50%, #b58900 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* éš±è—æœªè¼‰å…¥çš„å…ƒç´  */
        [x-cloak] { display: none !important; }
        
        /* é¸é …æŒ‰éˆ•äº’å‹•ç‰¹æ•ˆ */
        .option-badge {
            transition: all 0.2s ease;
        }
        .option-badge:active {
            transform: scale(0.95);
        }
    </style>
</head>
<body class="min-h-screen text-gray-800 antialiased font-sans selection:bg-cny-gold selection:text-white" x-data="mbtiApp()" x-init="initApp()">

    <!-- èƒŒæ™¯æµ®å‹•è£é£¾ -->
    <div class="bg-ornament text-6xl" style="top: 10%; left: 5%; animation-delay: 0s;">ğŸ§§</div>
    <div class="bg-ornament text-5xl" style="top: 20%; right: 8%; animation-delay: 1s;">ğŸ®</div>
    <div class="bg-ornament text-6xl" style="bottom: 15%; left: 10%; animation-delay: 2s;">ğŸŠ</div>
    <div class="bg-ornament text-5xl" style="bottom: 25%; right: 5%; animation-delay: 1.5s;">ğŸ§¨</div>

    <main class="max-w-md mx-auto min-h-screen flex flex-col px-4 py-8 relative z-10">
        
        <!-- ================= é–‹å§‹ç•«é¢ ================= -->
        <div x-show="screen === 'start'" x-transition.opacity.duration.500ms class="flex-1 flex flex-col justify-center items-center">
            <div class="glass-panel rounded-3xl p-8 w-full text-center relative overflow-hidden">
                <!-- é ‚éƒ¨ç´…é‡‘é£¾æ¢ -->
                <div class="absolute top-0 left-0 right-0 h-2 bg-gradient-to-r from-cny-red via-cny-gold to-cny-red"></div>
                
                <div class="inline-flex items-center justify-center w-24 h-24 rounded-full bg-red-50 text-cny-red text-4xl mb-6 shadow-inner relative">
                    <span class="absolute inset-0 border-4 border-cny-red rounded-full opacity-20 animate-ping"></span>
                    <i class="ri-fire-fill"></i>
                </div>
                
                <h1 class="text-4xl font-black mb-2 text-gray-900 tracking-tight">MBTI äººæ ¼æ¸¬é©—</h1>
                <h2 class="text-2xl font-bold text-cny-darkgold mb-6">ğŸ® éå¹´é™å®šç‰ˆ ğŸ®</h2>
                
                <p class="text-gray-600 mb-8 leading-relaxed">
                    é€é <b class="text-cny-red">20 å€‹æƒ…å¢ƒé¡Œ</b>ï¼Œ<br>
                    ä¾†ç™¼æ˜ä¸€ä¸‹ä½ çš„å°ˆå±¬æ–°å¹´äººæ ¼å§ï¼
                </p>

                <button @click="startQuiz()" 
                        class="w-full bg-gradient-to-r from-cny-red to-cny-darkred text-white py-4 rounded-2xl text-xl font-bold shadow-lg shadow-red-500/30 hover:shadow-red-500/50 hover:-translate-y-1 transition-all duration-300 flex items-center justify-center gap-2">
                    <i class="ri-play-circle-fill text-2xl"></i> ç«‹å³é–‹å§‹æ¸¬é©—
                </button>
                <p class="text-xs text-gray-400 mt-4">æ¸¬é©—æ™‚é–“ç´„ 3 åˆ†é˜</p>
            </div>
        </div>

        <!-- ================= æ¸¬é©—ç•«é¢ ================= -->
        <div x-show="screen === 'quiz'" x-cloak class="flex-1 flex flex-col">
            
            <!-- é ‚éƒ¨é€²åº¦æ¢ -->
            <div class="mb-8 mt-4">
                <div class="flex justify-between items-end mb-2">
                    <span class="text-sm font-bold text-gray-500">å•é¡Œ <span class="text-cny-red text-lg" x-text="currentIndex + 1"></span> / 20</span>
                    <span class="text-sm font-bold text-cny-darkgold" x-text="Math.round(((currentIndex) / 20) * 100) + '%'"></span>
                </div>
                <div class="h-3 w-full bg-gray-200 rounded-full overflow-hidden">
                    <div class="h-full bg-gradient-to-r from-cny-gold to-cny-red transition-all duration-500 ease-out"
                         :style="`width: ${((currentIndex) / 20) * 100}%`"></div>
                </div>
            </div>

            <!-- å¡ç‰‡æ»‘å‹•å€å¡Š -->
            <div class="card-stack flex-1" id="card-container">
                <template x-for="(q, index) in questions" :key="index">
                    <!-- åªæ¸²æŸ“ç•¶å‰å¡ç‰‡å’Œä¸‹ä¸€å¼µå¡ç‰‡ä»¥æå‡æ•ˆèƒ½ -->
                    <div x-show="index === currentIndex || index === currentIndex + 1"
                         class="swipe-card p-6 flex flex-col cursor-pointer"
                         :class="{ 'z-20': index === currentIndex, 'z-10': index === currentIndex + 1 }"
                         :style="getCardStyle(index)"
                         @mousedown="index === currentIndex && startDrag($event)"
                         @touchstart="index === currentIndex && startDrag($event)"
                         @click="index === currentIndex && handleClick($event)">
                        
                        <!-- å¡ç‰‡å…§éƒ¨ -->
                        <div class="flex-1 flex flex-col justify-center relative pointer-events-none">
                            
                            <!-- æµ®æ°´å°æç¤º (Left/Right) -->
                            <div class="absolute top-0 left-0 w-full flex justify-between px-4 opacity-0 transition-opacity duration-200"
                                 :style="index === currentIndex ? `opacity: ${Math.min(Math.abs(dragX) / 100, 1)}` : ''">
                                <span class="text-2xl font-black text-cny-red border-4 border-cny-red rounded-xl px-4 py-1 transform -rotate-12"
                                      x-show="dragX < 0">é¸ A</span>
                                <span class="text-2xl font-black text-green-500 border-4 border-green-500 rounded-xl px-4 py-1 transform rotate-12"
                                      x-show="dragX > 0">é¸ B</span>
                            </div>

                            <div class="text-center mb-8">
                                <div class="w-12 h-12 bg-red-50 rounded-full flex items-center justify-center mx-auto mb-4 text-2xl shadow-sm border border-red-100">
                                    ğŸ§§
                                </div>
                                <h3 class="text-2xl font-bold text-gray-800 leading-snug" x-text="q.q"></h3>
                            </div>
                        </div>

                        <!-- å…©å€‹é¸é … (è¦–è¦ºå±•ç¤ºç”¨ï¼Œä¸»è¦é æ»‘å‹•æˆ–æŒ‰éˆ•æ“ä½œ) -->
                        <div class="space-y-3 pointer-events-none mb-4">
                            <div class="p-4 rounded-xl border-2 border-red-100 bg-red-50/50 flex items-center gap-3">
                                <div class="w-8 h-8 rounded-full bg-white border-2 border-cny-red text-cny-red flex items-center justify-center font-bold text-sm shrink-0 shadow-sm"><i class="ri-arrow-left-line"></i></div>
                                <span class="text-sm font-medium text-gray-700 leading-tight" x-text="q.a"></span>
                            </div>
                            <div class="p-4 rounded-xl border-2 border-green-100 bg-green-50/50 flex items-center gap-3">
                                <div class="w-8 h-8 rounded-full bg-white border-2 border-green-500 text-green-500 flex items-center justify-center font-bold text-sm shrink-0 shadow-sm"><i class="ri-arrow-right-line"></i></div>
                                <span class="text-sm font-medium text-gray-700 leading-tight" x-text="q.b"></span>
                            </div>
                        </div>
                    </div>
                </template>
            </div>

            <!-- åº•éƒ¨æ“ä½œå€ -->
            <div class="mt-4 flex flex-col items-center justify-center gap-3 mb-4 min-h-[40px]">
                <button @click="prevQuestion()" x-show="currentIndex > 0" x-transition.opacity class="text-gray-500 hover:text-gray-700 transition-colors flex items-center gap-2 px-4 py-2 rounded-full hover:bg-gray-200/50 font-bold text-sm">
                    <i class="ri-arrow-go-back-line text-lg"></i> è¿”å›ä¸Šä¸€é¡Œ
                </button>
            </div>
            <p class="text-center text-gray-400 text-xs mb-4">å‘å·¦/å³æ»‘å‹•ï¼Œæˆ–ç›´æ¥é»é¸å¡ç‰‡å·¦/å³å´é¸é¡Œ</p>

        </div>

        <!-- ================= çµæœç•«é¢ ================= -->
        <div x-show="screen === 'result'" x-cloak x-transition.opacity.duration.800ms class="flex-1 flex flex-col items-center justify-center py-4">
            
            <h3 class="text-xl font-bold text-gray-500 mb-2">å°ˆå±¬æ–¼ä½ çš„éå¹´äººæ ¼æ˜¯...</h3>
            
            <!-- çµæœå¾½ç« å¡ç‰‡ (å–ä»£éœæ…‹åœ–ç‰‡) -->
            <div class="w-full bg-white rounded-3xl shadow-card overflow-hidden mb-8 border border-gray-100 relative group">
                <div class="absolute top-0 left-0 w-full h-32 bg-gradient-to-br from-cny-gold to-cny-red opacity-10"></div>
                
                <div class="p-8 text-center relative z-10">
                    <div class="w-24 h-24 mx-auto rounded-full bg-gradient-to-br from-cny-red to-cny-darkred text-white flex items-center justify-center text-3xl font-black mb-4 shadow-lg border-4 border-white">
                        <span x-text="resultType"></span>
                    </div>
                    
                    <h1 class="text-4xl font-black text-gray-900 mb-1" x-text="mbtiData[resultType]?.title"></h1>
                    <p class="text-sm font-bold text-cny-darkgold mb-6 uppercase tracking-widest" x-text="mbtiData[resultType]?.en"></p>
                    
                    <div class="bg-orange-50 rounded-2xl p-6 text-left relative">
                        <i class="ri-double-quotes-l text-4xl absolute -top-3 -left-2 text-orange-200"></i>
                        <p class="text-gray-700 leading-relaxed text-sm md:text-base relative z-10" x-text="mbtiData[resultType]?.desc"></p>
                    </div>
                </div>
            </div>

            <div class="w-full space-y-3">
                <button @click="shareResult()" class="w-full bg-gray-900 text-white py-4 rounded-2xl text-lg font-bold shadow-lg hover:bg-gray-800 transition-colors flex justify-center items-center gap-2">
                    <i class="ri-share-forward-fill"></i> åˆ†äº«æ¸¬é©—çµæœ
                </button>
                <button @click="resetQuiz()" class="w-full bg-white text-gray-600 border-2 border-gray-200 py-4 rounded-2xl text-lg font-bold hover:bg-gray-50 transition-colors flex justify-center items-center gap-2">
                    <i class="ri-refresh-line"></i> å†æ¸¬ä¸€æ¬¡
                </button>
            </div>
        </div>

        <!-- é å°¾ -->
        <footer class="mt-auto pt-8 text-center text-xs text-gray-400 relative z-10 pb-4">
            <p>åƒ…ä¾›å¨›æ¨‚åƒè€ƒï¼Œç¥æ‚¨æ–°å¹´å¿«æ¨‚ï¼ğŸ§§</p>
            <p class="mt-2 text-gray-500">v0.1.4 &copy; 2026 <a href="https://huobest.com/" target="_blank" class="text-cny-red font-medium hover:underline">éœå®¶ç§å¡¾</a></p>
        </footer>

    </main>
</body>
</html>
